{{/* Hotel Credit Card Quiz Shortcode for Hugo */}}
{{/* Save this file to: layouts/shortcodes/hotel-card-quiz.html */}}

<div id="hotel-quiz" class="hotel-quiz-container">
  <div class="quiz-card" id="quiz-content">
    <!-- Quiz content loads here via JS -->
  </div>
</div>

<style>
  @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fraunces:opsz,wght@9..144,600;9..144,700&display=swap');

  .hotel-quiz-container {
    font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
    max-width: 640px;
    margin: 2rem auto;
    padding: 0 16px;
    box-sizing: border-box;
  }

  .hotel-quiz-container * {
    box-sizing: border-box;
  }

  .quiz-card {
    background: #ffffff;
    border-radius: 24px;
    padding: 32px;
    box-shadow: 0 4px 24px rgba(45, 90, 71, 0.08);
    animation: quizFadeIn 0.4s ease-out;
  }

  @keyframes quizFadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Progress */
  .quiz-progress {
    margin-bottom: 28px;
  }

  .progress-bar {
    height: 8px;
    background: #e8e0d5;
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 10px;
  }

  .progress-fill {
    height: 100%;
    background: #2d5a47;
    border-radius: 4px;
    transition: width 0.4s ease-out;
  }

  .progress-text {
    font-size: 14px;
    color: #7d7167;
    font-weight: 500;
  }

  /* Question */
  .quiz-question {
    text-align: center;
    margin-bottom: 28px;
  }

  .question-icon {
    font-size: 44px;
    display: block;
    margin-bottom: 14px;
  }

  .question-text {
    font-family: 'Fraunces', Georgia, serif;
    font-size: 22px;
    font-weight: 600;
    color: #2d3a35;
    line-height: 1.35;
    margin: 0;
  }

  /* Options */
  .quiz-options {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 28px;
  }

  .option-btn {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding: 16px 18px;
    background: #faf8f5;
    border: 2px solid #e8e0d5;
    border-radius: 14px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: left;
    width: 100%;
    font-family: inherit;
  }

  .option-btn:hover {
    border-color: #c4d4c9;
    background: #f5f0ea;
  }

  .option-btn.selected {
    background: #eef5f1;
    border-color: #2d5a47;
    box-shadow: 0 0 0 3px rgba(45, 90, 71, 0.1);
  }

  .option-label {
    font-size: 15px;
    font-weight: 600;
    color: #2d3a35;
    margin-bottom: 3px;
  }

  .option-desc {
    font-size: 13px;
    color: #7d7167;
  }

  /* Navigation */
  .quiz-nav {
    display: flex;
    gap: 12px;
  }

  .back-btn {
    padding: 14px 22px;
    background: transparent;
    border: 2px solid #e8e0d5;
    border-radius: 12px;
    font-size: 15px;
    font-weight: 600;
    color: #7d7167;
    cursor: pointer;
    font-family: inherit;
    transition: all 0.2s ease;
  }

  .back-btn:hover {
    border-color: #c4bdb3;
    color: #5a534b;
  }

  .next-btn {
    flex: 1;
    padding: 14px 28px;
    background: #2d5a47;
    border: none;
    border-radius: 12px;
    font-size: 15px;
    font-weight: 600;
    color: #ffffff;
    cursor: pointer;
    font-family: inherit;
    transition: all 0.2s ease;
  }

  .next-btn:hover:not(:disabled) {
    background: #245040;
  }

  .next-btn:disabled {
    background: #c4bdb3;
    cursor: not-allowed;
  }

  /* Results */
  .result-header {
    text-align: center;
    margin-bottom: 24px;
  }

  .result-icon {
    font-size: 36px;
    display: block;
    margin-bottom: 10px;
  }

  .result-title {
    font-family: 'Fraunces', Georgia, serif;
    font-size: 26px;
    font-weight: 700;
    color: #2d5a47;
    margin: 0;
  }

  .card-recommendation {
    position: relative;
    padding: 24px 20px;
    background: #faf8f5;
    border-radius: 18px;
    border-left: 4px solid #2d5a47;
    margin-bottom: 24px;
  }

  .card-badge {
    position: absolute;
    top: -10px;
    right: 16px;
    padding: 5px 12px;
    border-radius: 16px;
    font-size: 11px;
    font-weight: 700;
    color: #ffffff;
    background: #2d5a47;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .card-name {
    font-family: 'Fraunces', Georgia, serif;
    font-size: 18px;
    font-weight: 700;
    color: #2d3a35;
    margin: 0 0 6px 0;
  }

  .card-fee {
    font-size: 15px;
    font-weight: 600;
    color: #2d5a47;
    margin: 0 0 6px 0;
  }

  .card-tagline {
    font-size: 14px;
    color: #7d7167;
    margin: 0;
    font-style: italic;
  }

  .benefits-section {
    margin-bottom: 24px;
  }

  .benefits-title {
    font-family: 'Fraunces', Georgia, serif;
    font-size: 16px;
    font-weight: 600;
    color: #2d3a35;
    margin: 0 0 14px 0;
  }

  .benefits-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .benefit-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 9px 0;
    font-size: 14px;
    color: #4a5148;
    border-bottom: 1px solid #f0ebe3;
  }

  .benefit-item:last-child {
    border-bottom: none;
  }

  .checkmark {
    color: #2d5a47;
    font-weight: 700;
    flex-shrink: 0;
  }

  .why-section {
    background: #f0ebe3;
    padding: 18px;
    border-radius: 14px;
    margin-bottom: 24px;
  }

  .why-title {
    font-family: 'Fraunces', Georgia, serif;
    font-size: 15px;
    font-weight: 600;
    color: #2d3a35;
    margin: 0 0 10px 0;
  }

  .why-text {
    font-size: 14px;
    line-height: 1.6;
    color: #4a5148;
    margin: 0;
  }

  /* CTA Buttons */
  .cta-section {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 20px;
  }

  .primary-btn {
    display: block;
    width: 100%;
    padding: 16px 28px;
    background: #2d5a47;
    border: none;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 700;
    color: #ffffff !important;
    text-align: center;
    text-decoration: none;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .primary-btn:hover {
    background: #245040;
    color: #ffffff;
  }

  .secondary-btn {
    display: block;
    width: 100%;
    padding: 14px 28px;
    background: transparent;
    border: 2px solid #2d5a47;
    border-radius: 12px;
    font-size: 15px;
    font-weight: 600;
    color: #2d5a47 !important;
    text-align: center;
    text-decoration: none;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .secondary-btn:hover {
    background: #eef5f1;
  }

  /* Share Section */
  .share-section {
    background: #faf8f5;
    border-radius: 14px;
    padding: 18px;
    margin-bottom: 20px;
    text-align: center;
  }

  .share-title {
    font-size: 14px;
    font-weight: 600;
    color: #2d3a35;
    margin: 0 0 12px 0;
  }

  .share-buttons {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
  }

  .share-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 10px 16px;
    background: #ffffff;
    border: 1px solid #e8e0d5;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 500;
    color: #4a5148;
    text-decoration: none;
    cursor: pointer;
    transition: all 0.2s ease;
    font-family: inherit;
  }

  .share-btn:hover {
    background: #f5f0ea;
    border-color: #c4bdb3;
  }

  .share-btn.copied {
    background: #eef5f1;
    border-color: #2d5a47;
    color: #2d5a47;
  }

  .restart-btn {
    display: block;
    width: 100%;
    padding: 12px;
    background: transparent;
    border: 2px solid #e8e0d5;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 600;
    color: #7d7167;
    cursor: pointer;
    margin-bottom: 20px;
    font-family: inherit;
    transition: all 0.2s ease;
  }

  .restart-btn:hover {
    border-color: #c4bdb3;
    color: #5a534b;
  }

  .disclaimer {
    font-size: 12px;
    color: #9a928a;
    text-align: center;
    line-height: 1.5;
    margin: 0;
  }

  /* Mobile */
  @media (max-width: 480px) {
    .quiz-card {
      padding: 24px 20px;
      border-radius: 20px;
    }
    .question-text {
      font-size: 20px;
    }
    .result-title {
      font-size: 22px;
    }
    .share-buttons {
      flex-direction: column;
    }
    .share-btn {
      width: 100%;
      justify-content: center;
    }
  }
</style>

<script>
(function() {
  const questions = [
    {
      id: 'dog_size',
      question: "How big is your dog?",
      icon: 'üêï',
      options: [
        { value: 'small', label: 'Under 40 lbs', desc: 'Welcome almost everywhere' },
        { value: 'medium', label: '40-70 lbs', desc: 'Some hotels have limits' },
        { value: 'large', label: '70+ lbs', desc: 'Weight limits are a real problem' },
        { value: 'giant', label: '100+ lbs', desc: 'Great Dane life' }
      ]
    },
    {
      id: 'travel_frequency',
      question: 'How often do you travel with your dog?',
      icon: 'üöó',
      options: [
        { value: 'rarely', label: 'A few times a year', desc: 'Special occasions only' },
        { value: 'monthly', label: 'About once a month', desc: 'Regular weekend adventures' },
        { value: 'frequent', label: 'Multiple times a month', desc: 'Always on the go together' },
        { value: 'fulltime', label: 'Full-time travelers', desc: 'Life on the road with my pup' }
      ]
    },
    {
      id: 'priority',
      question: "What's most important to you?",
      icon: 'üéØ',
      options: [
        { value: 'no_limits', label: 'No weight limits or pet fees', desc: "I'm tired of policy headaches" },
        { value: 'free_nights', label: 'Free night certificates', desc: 'I want guaranteed free stays' },
        { value: 'flexibility', label: 'Flexibility across hotel chains', desc: "I don't want to be locked in" },
        { value: 'status', label: 'Elite status perks', desc: 'Upgrades, breakfast, late checkout' }
      ]
    },
    {
      id: 'hotel_preference',
      question: 'Do you have a preferred hotel chain?',
      icon: 'üè®',
      options: [
        { value: 'hilton', label: 'Hilton', desc: 'Already loyal or interested' },
        { value: 'ihg', label: 'IHG / Kimpton', desc: 'Love the boutique vibe' },
        { value: 'marriott', label: 'Marriott', desc: 'Biggest footprint' },
        { value: 'none', label: 'No preference', desc: 'I go where the deals are' }
      ]
    },
    {
      id: 'spending',
      question: "What's your typical monthly credit card spending?",
      icon: 'üí≥',
      options: [
        { value: 'low', label: 'Under $1,500', desc: 'The basics plus dog treats' },
        { value: 'moderate', label: '$1,500-$4,000', desc: 'Normal household spending' },
        { value: 'high', label: '$4,000-$8,000', desc: 'Higher spender' },
        { value: 'very_high', label: '$8,000+', desc: 'Points add up fast' }
      ]
    },
    {
      id: 'annual_fee',
      question: "What annual fee are you comfortable with?",
      icon: 'üí∞',
      options: [
        { value: 'none', label: '$0 only', desc: "I'd rather earn slowly than pay a fee" },
        { value: 'low', label: 'Up to $100', desc: 'Worth it if I get a free night' },
        { value: 'moderate', label: 'Up to $200', desc: 'Happy to pay for solid perks' },
        { value: 'premium', label: '$500+', desc: 'Premium perks for serious travelers' }
      ]
    },
    {
      id: 'new_to_points',
      question: "How experienced are you with points and miles?",
      icon: 'üéì',
      options: [
        { value: 'beginner', label: 'Brand new', desc: 'Just getting started' },
        { value: 'some', label: 'Some experience', desc: 'I have a card or two' },
        { value: 'intermediate', label: 'Pretty comfortable', desc: 'I understand the basics' },
        { value: 'advanced', label: 'Points nerd', desc: 'Spreadsheets are involved' }
      ]
    }
  ];

  const cards = {
    hilton_aspire: {
      name: 'Hilton Honors American Express Aspire',
      shortName: 'Hilton Aspire',
      fee: '$550 annual fee',
      tagline: 'Premium perks for serious Hilton travelers',
      benefits: [
        'Complimentary Diamond status',
        'Free Night Reward every year (no spend required)',
        '$400 Hilton resort credit annually',
        '14X points at Hilton properties',
        'Unlimited Priority Pass lounge access',
        '$200 airline fee credit'
      ],
      bestFor: "You travel frequently and want the best Hilton has to offer. Diamond status means room upgrades and executive lounge access ‚Äî both incredibly valuable when traveling with a dog. The annual free night certificate alone can be worth $300-500 at pet-friendly properties.",
      primaryLink: '/posts/hilton-diamond-status-guide/',
      primaryText: 'See All Diamond Perks ‚Üí',
      secondaryLink: '/posts/best-credit-cards-pet-travelers/',
      secondaryText: 'Compare All Cards'
    },
    hilton_surpass: {
      name: 'Hilton Honors American Express Surpass',
      shortName: 'Hilton Surpass',
      fee: '$150 annual fee',
      tagline: 'The sweet spot for regular pet travelers',
      benefits: [
        'Complimentary Gold status (free breakfast!)',
        'Free Night Reward after $15K annual spend',
        '12X points at Hilton properties',
        '6X on dining, groceries, and gas',
        '10 Priority Pass lounge visits per year',
        '$200/year in Hilton credits'
      ],
      bestFor: "You travel regularly with your pup and want solid value without a huge annual fee. Gold status gets you free breakfast at most properties ‚Äî perfect for fueling up before morning walks. The $200 in quarterly Hilton credits more than covers the $150 fee.",
      primaryLink: '/posts/best-credit-cards-pet-travelers/',
      primaryText: 'Full Card Breakdown ‚Üí',
      secondaryLink: '/posts/hilton-diamond-status-guide/',
      secondaryText: 'How to Earn Diamond'
    },
    hilton_no_fee: {
      name: 'Hilton Honors American Express (No Fee)',
      shortName: 'Hilton No-Fee Card',
      fee: '$0 annual fee',
      tagline: 'Start earning with zero risk',
      benefits: [
        '7X points at Hilton properties',
        '5X on dining, groceries, and gas',
        '3X on all other purchases',
        '5th night free on award stays',
        'No annual fee ever'
      ],
      bestFor: "You're new to points or just want to dip your toe in without commitment. This card earns solid points on everyday spending with no fee. Every bag of dog food and tank of gas gets you closer to a free pet-friendly stay.",
      primaryLink: '/posts/best-credit-cards-pet-travelers/',
      primaryText: 'See How Points Add Up ‚Üí',
      secondaryLink: '/posts/why-hilton-for-pet-travelers/',
      secondaryText: 'Why Hilton for Pets'
    },
    ihg_premier: {
      name: 'IHG One Rewards Premier Credit Card',
      shortName: 'IHG Premier',
      fee: '$99 annual fee',
      tagline: 'Best for Kimpton and large dog travelers',
      benefits: [
        '140,000 point sign-up bonus',
        'Free Night Reward every year (up to 40K points)',
        '4th night free on award stays',
        '26X points at IHG properties',
        'Platinum Elite status',
        'Global Entry/TSA PreCheck credit'
      ],
      bestFor: "You have a large dog and want stress-free hotel stays. Kimpton (part of IHG) has NO weight limits, NO breed restrictions, and NO pet fees ‚Äî the best policy in the industry. The 4th night free benefit saves 25% on longer trips.",
      primaryLink: '/posts/kimpton-points-guide/',
      primaryText: 'How to Book Kimpton Free ‚Üí',
      secondaryLink: '/posts/traveling-with-large-dogs-hotel-policies/',
      secondaryText: 'Large Dog Hotel Guide'
    },
    ihg_no_fee: {
      name: 'IHG One Rewards Traveler Credit Card',
      shortName: 'IHG Traveler',
      fee: '$0 annual fee',
      tagline: 'No-risk entry to Kimpton stays',
      benefits: [
        '80,000 point sign-up bonus',
        '4th night free on award stays',
        '17X points at IHG properties',
        '3X on dining, gas, and groceries',
        'No annual fee'
      ],
      bestFor: "You want access to Kimpton's amazing pet policy without paying an annual fee. The 80K bonus is enough for 2+ free nights, and you still get the 4th night free benefit. Great starting point if you're not sure how often you'll stay at IHG.",
      primaryLink: '/posts/kimpton-points-guide/',
      primaryText: 'Kimpton Points Guide ‚Üí',
      secondaryLink: '/posts/traveling-with-large-dogs-hotel-policies/',
      secondaryText: 'Large Dog Hotel Guide'
    },
    chase_sapphire_preferred: {
      name: 'Chase Sapphire Preferred',
      shortName: 'Chase Sapphire Preferred',
      fee: '$95 annual fee',
      tagline: 'Maximum flexibility across hotel chains',
      benefits: [
        '60,000 point sign-up bonus',
        'Points transfer 1:1 to IHG, Hyatt, Marriott + airlines',
        '3X on dining and streaming',
        '2X on travel',
        '14+ transfer partners',
        'No foreign transaction fees'
      ],
      bestFor: "You don't want to commit to one hotel chain. Transfer points to IHG for Kimpton, Hyatt for luxury stays, or airlines for flights. This is the Swiss Army knife of travel cards ‚Äî perfect if you like options.",
      primaryLink: '/posts/kimpton-points-guide/',
      primaryText: 'How to Use for Kimpton ‚Üí',
      secondaryLink: '/posts/best-credit-cards-pet-travelers/',
      secondaryText: 'Compare All Cards'
    },
    marriott_boundless: {
      name: 'Marriott Bonvoy Boundless',
      shortName: 'Marriott Boundless',
      fee: '$95 annual fee',
      tagline: 'Best sign-up bonus for instant free nights',
      benefits: [
        '3 free nights sign-up bonus (up to 50K points each)',
        'Free Night Reward every year (up to 35K points)',
        '17X points at Marriott properties',
        '3X on dining, groceries, and gas',
        '15 Elite Night Credits per year'
      ],
      bestFor: "You want free nights right away. The 3-night sign-up bonus is one of the best in the industry ‚Äî that's a long weekend covered from day one. Marriott pet policies vary by property, so always call ahead if you have a larger dog.",
      primaryLink: '/posts/best-credit-cards-pet-travelers/',
      primaryText: 'Full Card Comparison ‚Üí',
      secondaryLink: '/posts/traveling-with-large-dogs-hotel-policies/',
      secondaryText: 'Check Pet Policies'
    }
  };

  let currentQ = 0;
  let answers = {};
  let selected = null;

  function calculateResult() {
    let scores = {
      hilton_aspire: 0,
      hilton_surpass: 0,
      hilton_no_fee: 0,
      ihg_premier: 0,
      ihg_no_fee: 0,
      chase_sapphire_preferred: 0,
      marriott_boundless: 0
    };

    // Dog size - large dogs push toward IHG/Kimpton
    if (answers.dog_size === 'small') {
      scores.hilton_surpass += 2;
      scores.hilton_no_fee += 2;
      scores.marriott_boundless += 2;
    } else if (answers.dog_size === 'medium') {
      scores.hilton_surpass += 1;
      scores.ihg_premier += 1;
    } else if (answers.dog_size === 'large') {
      scores.ihg_premier += 3;
      scores.ihg_no_fee += 2;
      scores.chase_sapphire_preferred += 1;
    } else if (answers.dog_size === 'giant') {
      scores.ihg_premier += 4;
      scores.ihg_no_fee += 3;
    }

    // Travel frequency
    if (answers.travel_frequency === 'rarely') {
      scores.hilton_no_fee += 3;
      scores.ihg_no_fee += 3;
    } else if (answers.travel_frequency === 'monthly') {
      scores.hilton_surpass += 2;
      scores.ihg_premier += 2;
      scores.marriott_boundless += 2;
    } else if (answers.travel_frequency === 'frequent') {
      scores.hilton_aspire += 2;
      scores.hilton_surpass += 1;
      scores.ihg_premier += 2;
    } else if (answers.travel_frequency === 'fulltime') {
      scores.hilton_aspire += 4;
      scores.chase_sapphire_preferred += 2;
    }

    // Priority
    if (answers.priority === 'no_limits') {
      scores.ihg_premier += 4;
      scores.ihg_no_fee += 3;
    } else if (answers.priority === 'free_nights') {
      scores.hilton_aspire += 3;
      scores.hilton_surpass += 2;
      scores.ihg_premier += 2;
      scores.marriott_boundless += 3;
    } else if (answers.priority === 'flexibility') {
      scores.chase_sapphire_preferred += 4;
    } else if (answers.priority === 'status') {
      scores.hilton_aspire += 4;
      scores.hilton_surpass += 2;
    }

    // Hotel preference
    if (answers.hotel_preference === 'hilton') {
      scores.hilton_aspire += 3;
      scores.hilton_surpass += 3;
      scores.hilton_no_fee += 3;
    } else if (answers.hotel_preference === 'ihg') {
      scores.ihg_premier += 3;
      scores.ihg_no_fee += 3;
    } else if (answers.hotel_preference === 'marriott') {
      scores.marriott_boundless += 4;
    } else if (answers.hotel_preference === 'none') {
      scores.chase_sapphire_preferred += 3;
    }

    // Spending
    if (answers.spending === 'low') {
      scores.hilton_no_fee += 3;
      scores.ihg_no_fee += 3;
    } else if (answers.spending === 'moderate') {
      scores.hilton_surpass += 2;
      scores.ihg_premier += 2;
      scores.marriott_boundless += 2;
    } else if (answers.spending === 'high') {
      scores.hilton_aspire += 2;
      scores.hilton_surpass += 1;
      scores.chase_sapphire_preferred += 2;
    } else if (answers.spending === 'very_high') {
      scores.hilton_aspire += 3;
      scores.chase_sapphire_preferred += 2;
    }

    // Annual fee tolerance
    if (answers.annual_fee === 'none') {
      scores.hilton_no_fee += 5;
      scores.ihg_no_fee += 5;
    } else if (answers.annual_fee === 'low') {
      scores.ihg_premier += 3;
      scores.marriott_boundless += 3;
      scores.chase_sapphire_preferred += 3;
    } else if (answers.annual_fee === 'moderate') {
      scores.hilton_surpass += 3;
      scores.ihg_premier += 2;
    } else if (answers.annual_fee === 'premium') {
      scores.hilton_aspire += 5;
    }

    // Experience level
    if (answers.new_to_points === 'beginner') {
      scores.hilton_no_fee += 3;
      scores.ihg_no_fee += 3;
      scores.marriott_boundless += 2;
    } else if (answers.new_to_points === 'some') {
      scores.hilton_surpass += 2;
      scores.ihg_premier += 2;
    } else if (answers.new_to_points === 'intermediate') {
      scores.chase_sapphire_preferred += 2;
      scores.hilton_aspire += 1;
    } else if (answers.new_to_points === 'advanced') {
      scores.chase_sapphire_preferred += 3;
      scores.hilton_aspire += 2;
    }

    return Object.entries(scores).reduce((a, b) => b[1] > a[1] ? b : a)[0];
  }

  function getShareText(cardName) {
    return `I got the ${cardName} for traveling with my dog! üêï Find your perfect pet travel card ‚Üí thepointspup.com/posts/hotel-credit-card-quiz/`;
  }

  function copyToClipboard(text, button) {
    navigator.clipboard.writeText(text).then(() => {
      const originalText = button.innerHTML;
      button.innerHTML = '‚úì Copied!';
      button.classList.add('copied');
      setTimeout(() => {
        button.innerHTML = originalText;
        button.classList.remove('copied');
      }, 2000);
    });
  }

  function renderQuestion() {
    const q = questions[currentQ];
    const progress = ((currentQ + 1) / questions.length) * 100;

    let html = `
      <div class="quiz-progress">
        <div class="progress-bar">
          <div class="progress-fill" style="width: ${progress}%"></div>
        </div>
        <span class="progress-text">Question ${currentQ + 1} of ${questions.length}</span>
      </div>
      <div class="quiz-question">
        <span class="question-icon">${q.icon}</span>
        <h3 class="question-text">${q.question}</h3>
      </div>
      <div class="quiz-options">
        ${q.options.map(opt => `
          <button class="option-btn ${selected === opt.value ? 'selected' : ''}" data-value="${opt.value}">
            <span class="option-label">${opt.label}</span>
            <span class="option-desc">${opt.desc}</span>
          </button>
        `).join('')}
      </div>
      <div class="quiz-nav">
        ${currentQ > 0 ? '<button class="back-btn" id="back-btn">‚Üê Back</button>' : ''}
        <button class="next-btn" id="next-btn" ${!selected ? 'disabled' : ''}>
          ${currentQ === questions.length - 1 ? 'See My Result' : 'Next ‚Üí'}
        </button>
      </div>
    `;

    document.getElementById('quiz-content').innerHTML = html;
    attachQuestionListeners();
  }

  function renderResult() {
    const cardKey = calculateResult();
    const card = cards[cardKey];
    const shareText = getShareText(card.shortName);
    const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}`;
    const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent('https://thepointspup.com/posts/hotel-credit-card-quiz/')}&quote=${encodeURIComponent(shareText)}`;

    let html = `
      <div class="result-header">
        <span class="result-icon">üêæ</span>
        <h3 class="result-title">Your Pup-fect Card Match!</h3>
      </div>
      <div class="card-recommendation">
        <span class="card-badge">Best Match</span>
        <h4 class="card-name">${card.name}</h4>
        <p class="card-fee">${card.fee}</p>
        <p class="card-tagline">${card.tagline}</p>
      </div>
      <div class="benefits-section">
        <h4 class="benefits-title">Key Benefits</h4>
        <ul class="benefits-list">
          ${card.benefits.map(b => `<li class="benefit-item"><span class="checkmark">‚úì</span>${b}</li>`).join('')}
        </ul>
      </div>
      <div class="why-section">
        <h4 class="why-title">Why This Card Fits You</h4>
        <p class="why-text">${card.bestFor}</p>
      </div>
      <div class="cta-section">
        <a href="${card.primaryLink}" class="primary-btn">${card.primaryText}</a>
        <a href="${card.secondaryLink}" class="secondary-btn">${card.secondaryText}</a>
      </div>
      <div class="share-section">
        <p class="share-title">Share your result with fellow pet travelers!</p>
        <div class="share-buttons">
          <a href="${twitterUrl}" target="_blank" rel="noopener" class="share-btn">üê¶ Twitter</a>
          <a href="${facebookUrl}" target="_blank" rel="noopener" class="share-btn">üìò Facebook</a>
          <button class="share-btn" id="copy-btn">üìã Copy Link</button>
        </div>
      </div>
      <button class="restart-btn" id="restart-btn">‚Üª Take Quiz Again</button>
      <p class="disclaimer"><strong>Note:</strong> Pet policies vary by property ‚Äî always call ahead to confirm your dog is welcome, especially if they're over 50 lbs. Card terms may change; check the issuer's website for current details. üêï</p>
    `;

    document.getElementById('quiz-content').innerHTML = html;
    document.getElementById('restart-btn').addEventListener('click', restart);
    document.getElementById('copy-btn').addEventListener('click', function() {
      copyToClipboard(shareText, this);
    });
  }

  function attachQuestionListeners() {
    document.querySelectorAll('.option-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        selected = this.dataset.value;
        document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
        this.classList.add('selected');
        document.getElementById('next-btn').disabled = false;
      });
    });

    document.getElementById('next-btn').addEventListener('click', function() {
      if (!selected) return;
      answers[questions[currentQ].id] = selected;
      selected = null;
      if (currentQ < questions.length - 1) {
        currentQ++;
        renderQuestion();
      } else {
        renderResult();
      }
    });

    const backBtn = document.getElementById('back-btn');
    if (backBtn) {
      backBtn.addEventListener('click', function() {
        if (currentQ > 0) {
          currentQ--;
          selected = answers[questions[currentQ].id] || null;
          renderQuestion();
        }
      });
    }
  }

  function restart() {
    currentQ = 0;
    answers = {};
    selected = null;
    renderQuestion();
  }

  // Initialize
  document.addEventListener('DOMContentLoaded', function() {
    if (document.getElementById('quiz-content')) {
      renderQuestion();
    }
  });

  // Fallback if DOM already loaded
  if (document.readyState !== 'loading') {
    renderQuestion();
  }
})();
</script>
